var app=function(e){function t(s){if(a[s])return a[s].exports;var i=a[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),a(1),a(4),a(10);var i=a(20),o=s(i),n=a(21),l=s(n),r=a(22),c=s(r),u=angular.module("DanMail",["LocalStorageModule","ui.router","ngMockE2E","restangular","contacts","login","mail"]);u.service("AuthService",["localStorageService",o["default"]]),u.service("saveStateService",["$stateParams","$state",l["default"]]),u.config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,a){t.state("app",{"abstract":!0,template:c["default"]})}]),u.run(["$rootScope","$state","$stateParams","AuthService","saveStateService",function(e,t,a,s,i){e.$on("$stateChangeStart",function(e,a,o){s.isAuthorized()||"login"===a.name||(i.save(o.mailBox,o.messageId),e.preventDefault(),alert("Please login"),t.go("login"))})}]),u.controller("Main",["AuthService",function(e){this.logOut=function(){return e.logOut()}}]),u.run(["$httpBackend",function(e){e.whenGET(/\.html$/).passThrough(),e.whenGET("/mail").respond(window.mocks.messages),e.whenGET("/contacts").respond(window.mocks.contacts)}]),t["default"]=u},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),o=s(i),n=a(3),l=s(n),r=angular.module("login",[]);r.config(["$stateProvider",function(e){e.state("login",{url:"/login",template:"<login></login>"})}]),r.directive("login",function(){return{restrict:"E",bindToController:!0,template:o["default"],controllerAs:"login",controller:["$state","AuthService",l["default"]]}}),t["default"]=r},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o=' <div class="top-content"> <div class="inner-bg"> <div class="container"> <div class="row"> <div class="col-sm-8 col-sm-offset-2 text"> </div> </div> <div class="row"> <div class="col-sm-6 col-sm-offset-3 form-box"> <div class="form-top"> <div class="form-top-left"> <h3>Login to Mail app</h3> <p>Enter username : <strong>admin</strong><br> and password : <strong>123</strong></p> </div> <div class="form-top-right"> <i class="fa fa-key"></i> </div> </div> <div class="form-bottom"> <form role="form" class="login-form" ng-submit="login.doLogin()"> <div class="form-group"> <label class="sr-only" for="form-username">Username</label> <input type="text" name="form-username" placeholder="Username..." class="form-username form-control" id="form-username" ng-model="login.login" required> </div> <div class="form-group"> <label class="sr-only" for="form-password">Password</label> <input type="password" name="form-password" placeholder="Password..." class="form-password form-control" id="form-password" ng-model="login.password" required> </div> <button type="submit" class="btn">Sign in!</button> </form> </div> </div> </div> <div class="row"> <div class="col-sm-6 col-sm-offset-3 social-login"> </div> </div> </div> </div> </div>';a.run(["$templateCache",function(e){e.put("login/views/login.html",o)}]),e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){var a=this;t.isAuthorized()&&e.go("app.mail",{mailBox:"inbox"}),this.doLogin=function(){t.authorize(a.login,a.password)?e.go("app.mail",{mailBox:"inbox"}):alert("Wrong password")}};t["default"]=a},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(5),o=s(i),n=a(6),l=s(n),r=a(8),c=s(r),u=angular.module("contacts",[]);u.config(["$stateProvider",function(e){e.state("app.contacts",{url:"/contacts","abstract":!0,template:"<ui-view/>",resolve:{contacts:["contactsService",function(e){return e.getAll()}]}}).state("app.contacts.list",{url:"/list",template:"<contacts-page></contacts-page>"}).state("app.contacts.edit",{url:"/:contactId/edit",template:"<contact></contact>"})}]),u.directive("contactsPage",l["default"]),u.directive("contact",c["default"]),u.service("contactsService",["Restangular","localStorageService",o["default"]]),t["default"]=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){var a=!1;this.getAll=function(){var s=this;return a?this.contacts:t.get("contacts")?this.getLocalAll():e.all("contacts").getList().then(function(e){return a=!0,s.contacts=e,e})},this.getLocalAll=function(){return this.contacts=t.get("contacts"),this.contacts},this.getOne=function(e){return this.contacts[e]},this.add=function(e,t){this.contacts.push(e),this.save()},this.edit=function(e,t){this.contacts.splice(t,1,e),this.save()},this["delete"]=function(e){this.contacts.splice(e,1),this.save()},this.save=function(){t.set("contacts",this.contacts)},this.isDataReceived=function(){return a}};t["default"]=a},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(7),o=s(i),n=function(){return{restrict:"E",scope:{},bindToController:!0,template:o["default"],controller:["contactsService",function(e){this.contacts=e.getAll()}],controllerAs:"contactsPage"}};t["default"]=n},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<div class="mail-layout-Aside main-columns col-md-2 list-group"> <button type="button" class="btn btn-lg btn-danger" id="compose" ui-sref="app.contacts.edit({contactId : \'new\'})">Add contact</button> </div> <div class="main-columns col-md-10 list-group"> <a ui-sref="app.contacts.edit({contactId : \'{{key}}\'})" ui-sref-active="active" class="mail-layoyt-messages-list-box list-group-item" ng-repeat="(key, value) in contactsPage.contacts | filter:main.messagesListFilter | orderBy:\'name\'" ng-click="contactsPage.show(value)"> <h4 class="list-group-item-heading">{{value.name}}</h4> <p class="list-group-item-text">{{value.email}}</p> </a> </div>';a.run(["$templateCache",function(e){e.put("contacts/views/contactsPage.html",o)}]),e.exports=o},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(9),o=s(i),n=function(){return{restrict:"E",scope:{},bindToController:!0,template:o["default"],controller:["contactsService","$stateParams","$state",function(e,t,a){var s=this,i=t.contactId;"new"!==i&&(this.current=e.getOne(i)),this.submitFormContact=function(){"new"===i?e.add(s.current,i):e.edit(s.current,i),a.go("app.contacts.list")},this["delete"]=function(){"new"!==i&&e["delete"](i),a.go("app.contacts.list")}}],controllerAs:"contact"}};t["default"]=n},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<div id="contactEdit"> <form name="contactForm" ng-submit="contact.submitFormContact()"> <div class="form-group"> <label for="exampleInputName">Name</label> <input type="text" class="form-control" id="exampleInputName" placeholder="Name" ng-model="contact.current.name" required> </div> <div class="form-group"> <label for="exampleInputEmail1">Email address</label> <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email" ng-model="contact.current.email" required> </div> <div class="form-group"> <label for="exampleInputTel">Tel</label> <input type="text" class="form-control" id="exampleInputTel" placeholder="Tel" ng-model="contact.current.tel"> </div> <div class="form-group"> <label for="Notes">Notes</label> <input type="textarea" class="form-control" id="Notes" placeholder="Notes" ng-model="contact.current.notes"> </div> <button type="submit" class="btn btn-primary">Save</button>\n<button type="reset" class="btn btn-default" ui-sref="app.contacts.list">Cancel</button>\n<button type="button" class="btn btn-danger" ng-click="contact.delete()">Delete</button> </form> </div>';a.run(["$templateCache",function(e){e.put("contacts/views/contact.html",o)}]),e.exports=o},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(11),o=s(i),n=a(12),l=s(n),r=a(13),c=s(r),u=a(14),d=s(u),m=a(16),f=s(m),g=a(18),v=s(g),p=a(19),h=s(p),b=angular.module("mail",[]);b.config(["$stateProvider",function(e){e.state("app.mail",{url:"/mail/:mailBox",template:"<mail></mail>",resolve:{messagesX:["messagesService",function(e){return e.get()}]}}).state("app.mail.read",{url:"/:messageId",template:"<message></message>"})}]),b.service("messagesService",["Restangular",o["default"]]),b.service("asideService",v["default"]),b.directive("mail",function(){return{restrict:"E",scope:{},bindToController:!0,template:l["default"],controller:["$http","$state","$filter","$stateParams","saveStateService","messagesService",h["default"]],controllerAs:"mail"}}),b.directive("messagesList",d["default"]),b.directive("message",function(){return{restrict:"E",scope:{},bindToController:!0,controller:["$stateParams","messagesService",function(e,t){this.message=t.getOne(e.messageId)}],template:c["default"],controllerAs:"message"}}),b.directive("aside",["asideService","messagesService",f["default"]]),t["default"]=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=this,a=!1;this.get=function(){return a?t.messages:e.all("mail").getList().then(function(e){return a=!0,t.messages=e,e})},this.getAll=function(){return this.messages},this.getOne=function(e){return this.messages[e]},this.countFolders=function(){if(t.messages){var e={};return t.messages.forEach(function(t,a){e[t.folder]?e[t.folder]++:e[t.folder]=1}),e}},this.isDataReceived=function(){return a}};t["default"]=a},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o=' <div class="mail-layout-Aside main-columns col-md-2 list-group">  <aside folders="mail.aside" call="mail.filterByAsideFolder(title)" countfolders="mail.countFolders"></aside> </div>    <div class="main-columns col-md-5 list-group"> <messages-list></messages-list> </div>   <div class="main-columns col-md-5 list-group"> <ui-view></ui-view>  </div> ';a.run(["$templateCache",function(e){e.put("mail/views/mail.html",o)}]),e.exports=o},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<li class="list-group-item"> {{message.message.name}}</li> <li class="list-group-item alert alert-info"> <p> {{message.message.email}} </p> </li> <li class="list-group-item well"> <p> {{message.message.body}} </p> </li>';a.run(["$templateCache",function(e){e.put("mail/views/message.html",o)}]),e.exports=o},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(15),o=s(i),n=function(){return{restrict:"E",template:o["default"]}};t["default"]=n},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<a class="mail-layoyt-messages-list-box list-group-item" ui-sref="app.mail.read({ messageId : \'{{value.id}}\'})" ui-sref-active="active" ng-repeat="(key, value) in mail.messages | filter:mail.messagesListFilter" ng-click="mail.message = value">{{value.title}} <h4 class="list-group-item-heading">{{value.email}}</h4> <p class="list-group-item-text">{{value.name}}</p> </a>';a.run(["$templateCache",function(e){e.put("mail/views/messages-list.html",o)}]),e.exports=o},function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(17),o=s(i),n=function(e,t){return{restrict:"E",scope:{folders:"="},bindToController:!0,controller:["asideService","$stateParams","$filter",function(e,a,s){this.countFolders=t.countFolders(),this.folders=e.get()}],template:o["default"],controllerAs:"aside"}};t["default"]=n},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<a ui-sref="app.mail({mailBox : value.title.toLowerCase()})" class="list-group-item" ui-sref-active="active" ng-repeat="(index, value) in aside.folders"> {{value.title}}\n<span class="badge">{{aside.countFolders[value.title.toLowerCase()]}}</span> </a>';a.run(["$templateCache",function(e){e.put("mail/views/aside.html",o)}]),e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this;this.aside=[{title:"Inbox"},{title:"Sent"},{title:"Draft"},{title:"Trash"},{title:"Spam"}],this.get=function(){return e.aside}};t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,a,s,i,o){var n=this,l=parseInt(s.messageId),r=s.mailBox;l||(l=i.get().messageId),r||(r=i.get().mailBox),r&&l||t.go("app.mail.read",{mailBox:r,messageId:l}),this.messages=o.getAll(),this.search=function(){n.message={},n.messagesListFilter=n.searchText},this.move=function(e){n.message.folder=e,n.countFolders=o.countFolders(),n.message={}},this.filterByAsideFolder=function(){n.message={},n.searchField="",r&&(n.messagesListFilter={folder:r.toLowerCase()})},this.filterByAsideFolder(),this.message=o.getOne(l),this.message.folder.toLowerCase()!==r&&(this.message={}),i.save(r,l)};t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=!1;e.get("isAuthorized")&&(t=!0),this.authorize=function(a,s){return"admin"==a&&123==s?(e.set("isAuthorized",!0),t=!0):t=!1,t},this.logOut=function(){t=!1,e.set("isAuthorized",!1)},this.isAuthorized=function(){return t}};t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){var a=this;this.save=function(e,t){a.mailBox=e,a.messageId=t},this.get=function(){return this.mailBox&&this.messageId||(this.mailBox="inbox",this.messageId=1),{mailBox:this.mailBox,messageId:parseInt(this.messageId)}}};t["default"]=a},function(e,t){var a,s=window.angular;try{a=s.module(["ng"])}catch(i){a=s.module("ng",[])}var o='<nav class="navbar navbar-default navbar-fixed-top"> <div class="container"> <a class="navbar-brand" href="#"></a> <ul class="nav navbar-nav"> <li>  </li> <li><a ui-sref="app.mail({mailBox : \'inbox\'})" ui-sref-active="active">Mail</a></li> <li><a ui-sref="app.contacts.list" ui-sref-active="active">Contacts</a></li> <li></li> <li> </li> <li>  </li> <li class="navbar-right"> <a ui-sref="login" ng-click="main.logOut()">LOG OUT</a>   </li> </ul> </div> </nav>  <div class="container"> <ui-view>  </ui-view> </div>';a.run(["$templateCache",function(e){e.put("danpan1.github.io/app/app.html",o)}]),e.exports=o}]);